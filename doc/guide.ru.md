# Руководство пользователя

## Общая картина действий

1. Необходимо записать данные в определенном формате.
2. Запустить программу визуализации и передать ей эти данные.

## Формат данных

Данные идут в формате CinemaScience с возможностью указания 3-мерных объектов в качестве артефактов.
Формат CinemaScience прост. Это каталог с именем вида ИМЯ.cdb, в котором необходимо разместить файл data.csv.
В этом файле указываются сначала колонки параметров, затем колонки артефактов. Пример файла:
```
T,alfa,FILE_points_1, FILE_points_2
0,1, a.csv,b.csv
1,1, a.csv,
0,0.5, d.csv,b.csv
1,2,   d.csv,e.csv
```
Колонки артефактов начинаются с префикса **FILE_**. Значения в строках, соответствующие артефактам, 
определяют файлы, который необходимо визуализировать при данной комбинации параметров. Эти файлы
должны также располагаться в наполняемом каталоге CinemaScience или его подкаталогах. Также допустимо
указание URL в качестве адреса файла.

Пользователь, запустив программу, сможет выбирать комбинации параметров. Визуализатор будет загружать
данные и показывать их в трехмерной сцене визуализации. Если артефактов несколько, то они будут показаны
в сцене одновременно.

* Полная документация по формату [на сайте CinemaScience](https://cinemasciencewebsite.readthedocs.io/en/latest/).

## Трехмерные артефакты

Чтобы указать вид отображения, который следует использовать для представления артефакта в трехмерной сцене,
надо указать его тип в названии колонки: FILE_**тип**_имя. Например: FILE_vrml_my1, FILE_obj_mnojestvo.

Поддерживаются различные 3d-артефакты, например vrml, obj, points, spheres, lines.

* [doc/3d_artefacts.ru.md](3d_artefacts.ru.md) - полный список поддерживаемых 3d-артефактов и описание их форматов.
* [examples](../examples/) - примеры данных (на английском).

> Список артефактов можно доработать, исходя из необходимости. Из идей - треугольники (впрочем уже есть obj и vrml),
> цилиндры, стрелки, и возможно даже картинка (хотя картинки уже можно изобразить точками).

## Запуск программы

Программа работает через веб-браузер. Ссылки для запуска -- на странице https://github.com/pavelvasev/38parrots/

## Передача данных в программу
Нажмите в левом верхнем углу кнопку **Указать адрес data.csv** и введите URL файла data.csv из синема-базы, которую Вы желаете визуализировать. Подробнее, где взять URL файла data.csv, см. ниже в разделе "запуск веб-сервера".

Альтернативно, можно указать локальные файлы через диалог выбора файлов.

### Запуск веб-сервера
Чтобы передать данные в программу, необходимо иметь к ним доступ по веб-протоколу http (https).

Для этого необходимо иметь работающий веб-сервер.
> Важно! При запуске веб-сервера должен быть активен http-заголовок `Access-Control-Allow-Origin: *` т.к. технически данные будут загружаться с домена viewlang.ru.

Самый простой способ запустить веб-сервер на своем компьютере - это использовать расширение [Web server for Chrome](https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb).
При его использовании не забудьте активировать advanced-опцию "set CORS headers".

Другие варианты запуска зависят от компьютера. Например, если есть менеджер пакетов npm, то:
```
npm install -g http-server
http-server --cors
```

## Создание анимации
Чтобы создать анимацию, неоходимо нажать кнопку **Анимация** в нижней левой части экрана.
Откроется диалог настройки анимации.
В нем следует указать параметр, по которому необходима анимация, его начальное и конечное значение, а также шаг.

> В настоящее время значения для параметра указываются по порядковому номеру, а не по фактическому значению.
> Это поведение возможно будет изменено в будущем.

После настройки параметров анимации необходимо нажать кнопку **Поехали**. Диалог анимации закроется, и начнется анимация.

Чтобы остановить анимацию, необходимо нажать кнопку **Стоп**.

## Запись роликов
Чтобы записать ролик, в диалоге анимации следует нажать галочку "Запись видео".
Откроется окно генератора видео-роликов. В нем можно выбрать формат и частоту кадров.

После этого необходимо вернуться в диалог анимации и запустить анимацию.

С каждым шагом анимации кадры будут передаваться в окно генератора видео. Когда анимация пройдет полный цикл, генератор начнет создавать ролик.

По завершению создания ролика его можно будет посмотреть или скачать как файл.
